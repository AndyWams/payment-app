jQuery.noConflict();
(function($, window, document) {
  $(document).ready(function($) {
    //AOS Initialization
    $(function() {
      AOS.init({
        once: true,
        mirror: false
      });
    });
  });

  $(document).ready(function() {});
  $(document).ready(function() {
    $(window).scroll(function(e) {
      var scrollVal = $(window).scrollTop();
      var x1 = $(".methods.mtd-easier").offset().top - 200;
      var x2 = $(".methods.mtd-faster").offset().top - 200;
      var x3 = $(".methods.mtd-cheaper").offset().top - 200;
      if (scrollVal >= x1 && scrollVal < x2) {
        //Easier active
        $("#transit h4").removeClass("active");
        $("#transit h4.h-easier").addClass("active");
        $("#transit .counter").text("01");
        $(".methods").removeClass("active");
        $(".methods.mtd-easier").addClass("active");
      }
      if (scrollVal >= x2 && scrollVal < x3) {
        //Faster active
        $("#transit h4").removeClass("active");
        $("#transit h4.h-faster").addClass("active");
        $("#transit .counter").text("02");

        $(".methods").removeClass("active");
        $(".methods.mtd-faster").addClass("active");
      }
      if (scrollVal >= x3) {
        //Easier active
        $("#transit h4").removeClass("active");
        $("#transit h4.h-cheaper").addClass("active");
        $("#transit .counter").text("03");

        $(".methods").removeClass("active");
        $(".methods.mtd-cheaper").addClass("active");
      }
    });
  });

  $(document).ready(function($) {
    //Slick JS Initialization
    var _prev = `<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">
    <i><svg width="13" height="23" viewBox="0 0 15 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 27L1 13.9994L14 1" stroke="white" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/></svg><i>
    </button>`;
    var _nxt = `<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">
      <i>
        <svg width="13" height="23" viewBox="0 0 14 26" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M0.999908 24.1108L12.5559 12.5548L0.999908 0.99984" stroke="white" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      <i></button>`;
    $(".slyck-slide").slick({
      infinite: false,
      speed: 3000,
      slidesToShow: 3,
      slidesToScroll: 3,
      arrows: true,
      // autoplay: true,
      autoplaySpeed: 5000,
      prevArrow: _prev,
      nextArrow: _nxt,
      responsive: [
        {
          breakpoint: 768,
          settings: {
            slidesToShow: 2,
            slidesToScroll: 2
          }
        }
      ]
    });
  });

  $(document).ready(function() {
    //Header Mobile Mneu
    $(".menu-trigger a, .sidenav .close").click(function() {
      $(".page .sidenav").toggleClass("show");
    });

    $(".quote-slide").owlCarousel({
      loop: false,
      center: false,
      margin: 25,
      autoWidth: true,
      items: 5
    });
  });

  //mouse icon click scroll
  $(document).ready(function() {
    $(".scroll_, .scroll .icon").click(function() {
      $("html, body").animate(
        {
          scrollTop: $("#feat").offset().top
        },
        1000
      );
    });
  });

  //Testimonial slides
  $(document).ready(function() {
    var _index = 1;
    $(".testimonials .quote-slide .card, .services .quote-slide .card").click(
      function(e) {
        e.preventDefault();
        _index =
          $(this)
            .parent()
            .index() + 1;
        $(
          ".testimonials .quote-slide .card, .services .quote-slide .card"
        ).removeClass("active");
        $(this).addClass("active");

        $(".testimonials .wrapr, .services .wrapr").removeClass("active");
        $(".testimonials .wrapr.t_" + _index).addClass("active");
        $(".services .wrapr.t_" + _index).addClass("active");

        $(".testimonials .image, .services .image").removeClass("active");
        $(".testimonials .image.img_" + _index).addClass("active");
        $(".services .image.img_" + _index).addClass("active");
      }
    );

    //autoplay script

    setInterval(function() {
      _index++;
      if (_index > 5) {
        _index = 1;
      }

      $(
        ".testimonials .quote-slide .owl-item:nth-child(" +
          _index +
          "),.services .quote-slide .owl-item:nth-child(" +
          _index +
          ")"
      )
        .find(".card")
        .trigger("click");
    }, 8000);
  });

  //FAQ List Focus
  $(document).ready(function() {
    $(".faqs .wrap").click(function() {
      $(this)
        .attr("tabindex", -1)
        .focus();

      $(".plus", this).toggleClass("hide");
      $(".minus", this).toggleClass("show");
    });
  });

  //Pricing calculator
  $(document).ready(function() {
    var $input = $("#pricingFormat");
    var $form = $("#pricing");
    var config = {
      rate: 0.75,
      cap: 200,
      input: 0
    };

    $(".select-tab a").click(function(e) {
      e.preventDefault();
      $(".select-tab a").removeClass("active");
      $(this).addClass("active");
      var _id = $(this).attr("data-id");
      if (_id == "acct") {
        config = {
          rate: 0.75,
          cap: 200,
          input: 0
        };
      } else if (_id == "card") {
        config = {
          rate: 1.2,
          cap: 2000,
          input: 0
        };
      }
      displayPricing();
    });

    function currencyFormat(num) {
      return "â‚¦" + num.toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,");
    }

    function displayPricing() {
      var price = config.input * (config.rate / 100);

      if (price >= config.cap) {
        $(".naration .row .col-lg-7 .cap span").text(config.cap);
        $(".naration .row .col-lg-7 .cap").addClass("active");
        price = config.input - config.cap;
      } else {
        $(".naration .row .col-lg-7 .cap").removeClass("active");
        price = config.input - price;
      }
      $(".naration .row .col-lg-7 h1").html(currencyFormat(price));
      $(".naration .row .col-lg-5 h1").text(config.rate + "%");
    }

    $(".calculate").click(function() {
      displayPricing();
    });

    $input.on("keyup", function(event) {
      if ($.inArray(event.keyCode, [38, 40, 37, 39]) !== -1) {
        return;
      }
      var $this = $(this);
      var input = $this.val().replace(/[\D\s\._\-]+/g, "");
      input = input ? parseInt(input, 10) : 0;
      config.input = parseInt(input, 10);
      displayPricing();

      $this.val(function() {
        return input === 0 ? "" : input.toLocaleString();
      });
    });

    $form.submit(function(e) {
      e.preventDefault();
    });
  });

  //signup form post
  $(document).ready(function() {
    $(".signup-form").submit(function(e) {
      e.stopPropagation();
      e.preventDefault();

      var _submitBtn = $(this).find("button");
      _submitBtn.text("Please wait...");
      var payload = {
        businessName: $(this)
          .find("[name=name]")
          .val(),
        email: $(this)
          .find("[name=email]")
          .val(),
        password: $(this)
          .find("[name=password]")
          .val()
      };
      var _url = "https://sandbox.fo.monnify.com/";
      if (location.href.match(/.*(localhost)/g)) {
        console.log("We are not LIVE");
        _url = "https://sandbox.fo.monnify.com/";
      } else {
        console.log("We are LIVE");
        _url = "https://fo.monnify.com/api/v1/onboarding/signup";
      }

      $.ajax({
        url: _url,
        type: "POST",
        data: JSON.stringify(payload),
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        success: function(result) {
          if (result && result.requestSuccessful == true) {
            $(".apt-modal .item").removeClass("active");
            $(".apt-modal").addClass("active");
            $(".apt-modal .item.success")
              .delay(500)
              .addClass("active");
            _submitBtn.text("Sign up");
          } else {
            $(".apt-modal .item").removeClass("active");
            $(".apt-modal").addClass("active");
            $(".apt-modal .item.error")
              .delay(500)
              .addClass("active");
            _submitBtn.text("Sign up");
          }
        },
        error: function(e) {
          $(".apt-modal .item").removeClass("active");
          $(".apt-modal").addClass("active");
          $(".apt-modal .item.error")
            .delay(500)
            .addClass("active");
          _submitBtn.text("Sign up");
        }
      });
    });

    $(".signup-form input[type=password]").focus(function(e) {
      $(".signup-form .pass-strength").addClass("active");
    });
    $(".signup-form input[type=password]").blur(function(e) {
      $(".signup-form .pass-strength").removeClass("active");
    });

    $(".apt-modal .modal-close").click(function(e) {
      e.preventDefault();
      e.stopPropagation();
      $(".apt-modal").removeClass("active");
    });
  });
})(jQuery);
